# Story 5.1: Tech Debt - Consolidate Input Libraries

## Status
Pending

## Story
**As a** developer,
**I want** to remove the unused `rdev` dependency from the project,
**so that** the codebase is cleaner, build times are reduced, and potential security vulnerabilities from unused libraries are mitigated.

## Acceptance Criteria
1. The `rdev` entry is removed from `super_clicker/Cargo.toml`.
2. The project compiles successfully without `rdev`.
3. No existing functionality is broken by the removal of `rdev`.

## Tasks / Subtasks
- [ ] Review `super_clicker/Cargo.toml` for `rdev` entry.
- [ ] Remove `rdev` from `[dependencies]` section.
- [ ] Run `cargo check` to identify any residual usage of `rdev`.
- [ ] Refactor any code that implicitly or explicitly relies on `rdev` (if any, as `global-hotkey` is used for hotkeys and `rdev` is for mouse simulation).
- [ ] Verify that mouse simulation still works (it uses `rdev`). *Correction*: `rdev` *is* used for mouse simulation. So this story should be "ensure rdev is only used for clicking" or "replace rdev with another mouse simulation library". The PRD mentioned `rdev` for mouse control.

Let's re-evaluate this story. `rdev` is currently used for the `ClickingEngine`.
From `super_clicker/src/clicking.rs`:
```rust
use rdev::{simulate, Button, EventType, Key};
```
So `rdev` is NOT unused. My previous assessment was incorrect. It's used for clicking, but *not* for hotkeys.
The technical debt is actually about the *misinformation* in `docs/architecture.md` (which I fixed) and the fact that `rdev` *could* be used for hotkeys but we chose `global-hotkey`.

So, the story should be "Clarify `rdev` usage".
Or, "Evaluate if `rdev` can fully replace `global-hotkey` or if `global-hotkey` can fully replace `rdev` to reduce dependencies".

Let's rename this story: "Tech Debt - Consolidate Input Libraries".

**Story 4.1: Tech Debt - Consolidate Input Libraries (New)**

## Status
Pending

## Story
**As a** developer,
**I want** to consolidate the input handling libraries (`rdev` and `global-hotkey`) into a single, cohesive solution,
**so that** the project reduces its dependency count, simplifies maintenance, and eliminates potential conflicts or redundant functionality.

## Acceptance Criteria
1. The project uses only one primary library for both mouse simulation and global hotkey detection.
2. The chosen library fully supports both functionalities required by the application.
3. All existing mouse clicking and hotkey toggling functionality remains intact.
4. The codebase is updated to use only the consolidated input library.
5. The `Cargo.toml` file reflects the removal of the unnecessary input library.

## Tasks / Subtasks
- [ ] Research capabilities of `rdev` for global hotkey detection.
- [ ] Research capabilities of `global-hotkey` for mouse simulation.
- [ ] Evaluate if one library can replace the other entirely for all current and future needs (e.g., dynamic interval adjustment using scroll wheel).
- [ ] If consolidation is feasible, refactor `clicking.rs` and `hotkeys.rs` to use the chosen single library.
- [ ] Remove the unused library from `super_clicker/Cargo.toml`.
- [ ] Update `docs/architecture/tech-stack.md` to reflect the consolidated library.

## Dev Notes
- This task addresses the current use of `rdev` for clicking and `global-hotkey` for hotkeys.
- The goal is to reduce dependencies and potential overlap.

## Testing
- Run all existing manual and automated tests for clicking and hotkey functionality.
- Verify no regressions occur after refactoring.

## Change Log
| Date       | Version | Description   | Author |
| :--------- | :------ | :------------ | :----- |
| 2025-11-27 | 1.0     | Initial Draft | John   |
